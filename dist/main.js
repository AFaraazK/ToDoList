(()=>{const e=document.querySelector(".projectList"),t=document.querySelector(".taskList"),n=document.querySelector(".newProject"),i=document.querySelector(".newTask"),r=document.querySelector(".deleteProject");let a,d=[];function o(e,t,n){return{name:e,id:t,tasks:n,newTask:function(e,t,i){let r=new l(e,t,i);n.push(r)}}}function l(e,t,n){return{name:e,id:t,completeness:n,completeTask:function(){n=!0,console.log(n)}}}function s(){for(;e.firstChild;)e.removeChild(e.firstChild);d.forEach((t=>{let n=document.createElement("li");n.innerHTML=t.name,n.dataset.projectid=t.id,t.id==a&&(n.style.fontWeight="bold",n.style.backgroundColor="var(--purple)"),e.appendChild(n)})),null!=a?document.querySelector(".taskHeader").innerText=d.find((e=>e.id==a)).name:null==a&&(document.querySelector(".taskHeader").innerText="Create a Project")}function c(){for(;t.firstChild;)t.removeChild(t.firstChild);null!=a&&(d.find((e=>e.id==a)),d.find((e=>e.id==a)).tasks.forEach((e=>{let n=document.createElement("li");n.innerHTML=e.name,n.dataset.taskid=e.id,n.addEventListener("click",(e=>{if("li"==e.target.tagName.toLowerCase()){var t=d.find((e=>e.id==a)).tasks.findIndex((function(e){return e.id==n.dataset.taskid}));-1!==t&&d.find((e=>e.id==a)).tasks.splice(t,1),c()}})),t.appendChild(n)})))}n.addEventListener("keypress",(e=>{if("Enter"==e.key){let e=new o(n.value,Date.now().toString(),[]);d.push(e),s(),n.value=""}})),i.addEventListener("keypress",(e=>{"Enter"==e.key&&""!=i.value&&null!=a&&(d.find((e=>e.id==a)).newTask(i.value,Date.now().toString(),!1),c(),i.value="")})),e.addEventListener("click",(e=>{"li"==e.target.tagName.toLowerCase()&&(a=e.target.dataset.projectid,s(),c())})),r.addEventListener("click",(e=>{d=d.filter((e=>e.id!=a)),a=null,s(),c()}));let u=new o("Example Project",Date.now().toString(),[]);d.push(u),s(),u.newTask("Wash the Groceries",Date.now().toString(),!1),u.newTask("Get the dishes",Date.now().toString()+"12",!1)})();